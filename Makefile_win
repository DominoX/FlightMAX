CXX=x86_64-w64-mingw32-g++
XPLANE_DEFINES=-DIBM=1 -DXPLM200=1 -DXPLM210=1 -DXPLM300=1 -DXPLM301=1
INCLUDES=-I/opt/XSDK/CHeaders/XPLM/ -I/opt/XSDK/CHeaders/Widgets/ 
LDPATHS=-L /opt/XSDK/Libraries/Win/ -L /opt/XSDK/CHeaders/Widgets/ -L /usr/x86_64-w64-mingw32/lib/
LDLIBS=-l XPLM_64 -l XPWidgets_64 -l opengl32
LDFLAGS=--shared -static -static-libgcc -static-libstdc++ $(LDPATHS) $(LDLIBS)
CXXDEFINES=-DWIN64 -DNDEBUG -D_WINDOWS -D_MBCS -D_USRDLL -DCustomCommands_EXPORTS -DSIMDATA_EXPORTS -DUSE_EXTERNAL_ALLOCATOR -DCREATECOMPLETEEDITION
CXXFLAGS=-O3 -Wshadow -Wfloat-equal -pedantic -w -std=c++11 -fexceptions -fpermissive  $(CXXDEFINES) $(XPLANE_DEFINES) $(INCLUDES)
CFLAGS=$(CXXFLAGS)

all: win.xpl

win.xpl: src/imgui4xp.o src/imgui_starter_window.o src/ImgWindow/ImgWindow.o src/imgui/imgui.o src/imgui/imgui_demo.o src/imgui/imgui_draw.o 
	$(CXX) -o win.xpl src/imgui4xp.o src/imgui_starter_window.o src/ImgWindow/ImgWindow.o src/imgui/imgui.o src/imgui/imgui_demo.o src/imgui/imgui_draw.o $(LDFLAGS)

install: win.xpl
	cp win.xpl release/imgui4xp/win_x64/imgui4xp.xpl

clean:
	rm -f src/*.o src/imgui/*.o src/ImgWindow/*.o scr/win.xpl
